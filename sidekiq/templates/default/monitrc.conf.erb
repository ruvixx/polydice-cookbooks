check process <%= @process_name %>
  with pidfile <%= @path %>/shared/pids/<%= @process_name %>.pid
  start program = "/bin/bash -c 'cd <%= @path %>/current; touch log/sidekiq.log; chmod u+w log/sidekiq.log; PATH=/usr/local/bin:$PATH bundle exec sidekiq -v -C config/sidekiq.yml -e <%= @env %> -d -P <%= @path %>/shared/pids/<%= @process_name %>.pid -L log/sidekiq.log'" as uid <%= @user %> and gid <%= @group %> with timeout 90 seconds
  stop program = "/bin/bash -c 'cd <%= @path %>/current; PATH=/usr/local/bin:$PATH bundle exec sidekiqctl stop <%= @path %>/shared/pids/<%= @process_name %>.pid 30'" with timeout 180 seconds
  if totalmem is greater than <%= @sidekiq && @sidekiq[:totalmem] || '2.5 GB' %> for 10 cycles then restart
  group <%= @process_name %>
